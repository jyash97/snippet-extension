{"version":3,"file":"context.js","sources":["../src/templates/react.js","../src/utils/index.js","../src/index.js"],"sourcesContent":["function getIndexFile({ content, imports }) {\n\treturn `import React from 'react';\nimport ReactDOM from 'react-dom';\n${imports}\n\nconst App = () => (\n    <React.Fragment>\n        ${content}\n    </React.Fragment>\n)\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);`;\n}\n\nexport function getReactFiles({ content, imports }) {\n\treturn {\n\t\t'package.json': {\n\t\t\tcontent: {\n\t\t\t\tdependencies: {\n\t\t\t\t\treact: 'latest',\n\t\t\t\t\t'react-dom': 'latest',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\t'index.js': {\n\t\t\tcontent: getIndexFile({ content, imports }),\n\t\t},\n\t\t'index.html': {\n\t\t\tcontent: '<div id=\"root\"></div>',\n\t\t},\n\t};\n}\n","// import { parse, print } from 'recast';\n// import parser from 'recast/parsers/babylon';\nimport { getReactFiles } from '../templates/react';\n\nconst getTemplateFiles = ({ template, content: code }) => {\n\t// const ast = parse(code, {\n\t// \tparser,\n\t// });\n\t// ast.program.body = ast.program.body.filter((item) => item.type !== 'ImportDeclaration');\n\n\t// const content = print(ast).code;\n\tswitch (template) {\n\t\tcase 'react': {\n\t\t\treturn getReactFiles({ content: code, import: '' });\n\t\t}\n\t\tdefault: {\n\t\t\treturn {};\n\t\t}\n\t}\n};\n\nexport const getSandboxURL = (params) => {\n\treturn fetch('https://codesandbox.io/api/v1/sandboxes/define?json=1', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAccept: 'application/json',\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tfiles: getTemplateFiles(params),\n\t\t}),\n\t});\n};\n","import { getSandboxURL } from './utils';\n\nchrome.runtime.onInstalled.addListener(function runtimeListener() {\n\tchrome.contextMenus.create({\n\t\ttitle: 'Open in CodeSandbox',\n\t\tid: 'parent',\n\t\tcontexts: ['selection'],\n\t});\n\n\tchrome.contextMenus.create({\n\t\ttitle: 'React',\n\t\tparentId: 'parent',\n\t\tid: 'react',\n\t\tcontexts: ['selection'],\n\t});\n\n\tchrome.contextMenus.create({\n\t\ttitle: 'Vanilla',\n\t\tparentId: 'parent',\n\t\tid: 'vanilla',\n\t\tcontexts: ['selection'],\n\t});\n});\n\nchrome.contextMenus.onClicked.addListener(function clickListener(clickData) {\n\tswitch (clickData.menuItemId) {\n\t\tcase 'react': {\n\t\t\tgetSandboxURL({\n\t\t\t\ttemplate: 'react',\n\t\t\t\tcontent: clickData.selectionText,\n\t\t\t})\n\t\t\t\t.then((r) => r.json())\n\t\t\t\t.then((data) => {\n\t\t\t\t\tchrome.tabs.create({\n\t\t\t\t\t\turl: `https://codesandbox.io/s/${data.sandbox_id}`,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tconsole.log('Nothing');\n\t\t}\n\t}\n});\n"],"names":["getIndexFile","content","imports","getReactFiles","dependencies","react","getTemplateFiles","template","code","getSandboxURL","params","fetch","method","headers","Accept","body","JSON","stringify","files","chrome","runtime","onInstalled","addListener","runtimeListener","contextMenus","create","title","id","contexts","parentId","onClicked","clickListener","clickData","menuItemId","selectionText","then","r","json","data","tabs","url","sandbox_id","console","log"],"mappings":";;;CAAA,SAASA,YAAT,OAA4C;CAAA,MAApBC,OAAoB,QAApBA,OAAoB;CAAA,MAAXC,OAAW,QAAXA,OAAW;CAC3C,kFAECA,OAFD,oEAMSD,OANT;CAcA;;CAEM,SAASE,aAAT,QAA6C;CAAA,MAApBF,OAAoB,SAApBA,OAAoB;CAAA,MAAXC,OAAW,SAAXA,OAAW;CACnD,SAAO;CACN,oBAAgB;CACfD,MAAAA,OAAO,EAAE;CACRG,QAAAA,YAAY,EAAE;CACbC,UAAAA,KAAK,EAAE,QADM;CAEb,uBAAa;CAFA;CADN;CADM,KADV;CASN,gBAAY;CACXJ,MAAAA,OAAO,EAAED,YAAY,CAAC;CAAEC,QAAAA,OAAO,EAAPA,OAAF;CAAWC,QAAAA,OAAO,EAAPA;CAAX,OAAD;CADV,KATN;CAYN,kBAAc;CACbD,MAAAA,OAAO,EAAE;CADI;CAZR,GAAP;CAgBA;;CClCD;;CAIA,IAAMK,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAiC;CAAA,MAA9BC,QAA8B,QAA9BA,QAA8B;CAAA,MAAXC,IAAW,QAApBP,OAAoB;;CACzD;CACA;CACA;CACA;CAEA;CACA,UAAQM,QAAR;CACC,SAAK,OAAL;CAAc;CACb,eAAOJ,aAAa,CAAC;CAAEF,UAAAA,OAAO,EAAEO,IAAX;CAAiB,oBAAQ;CAAzB,SAAD,CAApB;CACA;;CACD;CAAS;CACR,eAAO,EAAP;CACA;CANF;CAQA,CAfD;;CAiBO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,MAAD,EAAY;CACxC,SAAOC,KAAK,CAAC,uDAAD,EAA0D;CACrEC,IAAAA,MAAM,EAAE,MAD6D;CAErEC,IAAAA,OAAO,EAAE;CACR,sBAAgB,kBADR;CAERC,MAAAA,MAAM,EAAE;CAFA,KAF4D;CAMrEC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;CACpBC,MAAAA,KAAK,EAAEZ,gBAAgB,CAACI,MAAD;CADH,KAAf;CAN+D,GAA1D,CAAZ;CAUA,CAXM;;CCnBPS,MAAM,CAACC,OAAP,CAAeC,WAAf,CAA2BC,WAA3B,CAAuC,SAASC,eAAT,GAA2B;CACjEJ,EAAAA,MAAM,CAACK,YAAP,CAAoBC,MAApB,CAA2B;CAC1BC,IAAAA,KAAK,EAAE,qBADmB;CAE1BC,IAAAA,EAAE,EAAE,QAFsB;CAG1BC,IAAAA,QAAQ,EAAE,CAAC,WAAD;CAHgB,GAA3B;CAMAT,EAAAA,MAAM,CAACK,YAAP,CAAoBC,MAApB,CAA2B;CAC1BC,IAAAA,KAAK,EAAE,OADmB;CAE1BG,IAAAA,QAAQ,EAAE,QAFgB;CAG1BF,IAAAA,EAAE,EAAE,OAHsB;CAI1BC,IAAAA,QAAQ,EAAE,CAAC,WAAD;CAJgB,GAA3B;CAOAT,EAAAA,MAAM,CAACK,YAAP,CAAoBC,MAApB,CAA2B;CAC1BC,IAAAA,KAAK,EAAE,SADmB;CAE1BG,IAAAA,QAAQ,EAAE,QAFgB;CAG1BF,IAAAA,EAAE,EAAE,SAHsB;CAI1BC,IAAAA,QAAQ,EAAE,CAAC,WAAD;CAJgB,GAA3B;CAMA,CApBD;CAsBAT,MAAM,CAACK,YAAP,CAAoBM,SAApB,CAA8BR,WAA9B,CAA0C,SAASS,aAAT,CAAuBC,SAAvB,EAAkC;CAC3E,UAAQA,SAAS,CAACC,UAAlB;CACC,SAAK,OAAL;CAAc;CACbxB,QAAAA,aAAa,CAAC;CACbF,UAAAA,QAAQ,EAAE,OADG;CAEbN,UAAAA,OAAO,EAAE+B,SAAS,CAACE;CAFN,SAAD,CAAb,CAIEC,IAJF,CAIO,UAACC,CAAD;CAAA,iBAAOA,CAAC,CAACC,IAAF,EAAP;CAAA,SAJP,EAKEF,IALF,CAKO,UAACG,IAAD,EAAU;CACfnB,UAAAA,MAAM,CAACoB,IAAP,CAAYd,MAAZ,CAAmB;CAClBe,YAAAA,GAAG,qCAA8BF,IAAI,CAACG,UAAnC;CADe,WAAnB;CAGA,SATF;CAUA;CACA;;CACD;CAAS;CACRC,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;CACA;CAhBF;CAkBA,CAnBD;;;;;;"}